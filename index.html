<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Cybersecurity Training Package</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
            rel="stylesheet" />
        <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-auth-compat.js"></script>
        <style>
            body {
                font-family: "Inter", sans-serif;
                background-color: #f9fafb;
            }
            .hidden {
                display: none;
            }
            .active {
                display: block;
            }
        </style>
    </head>
    <body class="min-h-screen bg-gray-100 text-gray-800 p-6">
        <div id="auth-section" class="flex justify-center items-center h-screen">
            <div class="bg-white p-6 rounded shadow w-full max-w-sm">
                <h2 class="text-2xl font-bold mb-4 text-center">Login</h2>
                <input id="email" type="email" placeholder="Email" class="w-full mb-2 p-2 border rounded" />
                <input id="password" type="password" placeholder="Password" class="w-full mb-4 p-2 border rounded" />
                <button id="login-btn" class="bg-blue-600 text-white w-full py-2 rounded">Login</button>
                <p id="auth-error" class="text-red-600 text-sm mt-2 text-center"></p>
            </div>
        </div>

        <div id="main-app" class="hidden">
            <header class="flex justify-between items-center mb-10">
                <div class="text-center w-full">
                    <h1 class="text-4xl font-bold text-blue-600">Cybersecurity Awareness Training</h1>
                    <p class="text-lg mt-2">Empowering students with essential knowledge to stay safe online.</p>
                </div>
                <div class="absolute top-4 right-6 bg-white p-3 rounded shadow">
                    <p id="user-name" class="font-semibold"></p>
                    <p id="user-email" class="text-sm text-gray-600"></p>
                </div>
            </header>

            <nav class="flex justify-center gap-4 mb-6">
                <button class="tab px-4 py-2 bg-blue-100 text-blue-700 font-semibold rounded" data-target="training">
                    Training
                </button>
                <button class="tab px-4 py-2 bg-blue-100 text-blue-700 font-semibold rounded" data-target="quiz">
                    Quiz
                </button>
                <button class="tab px-4 py-2 bg-blue-100 text-blue-700 font-semibold rounded" data-target="feedback">
                    Survey
                </button>
                <button class="tab px-4 py-2 bg-blue-100 text-blue-700 font-semibold rounded" data-target="report">
                    Report
                </button>
            </nav>

            <main class="max-w-3xl mx-auto">
                
                <!-- Training Module -->
                <section id="training" class="active bg-white p-6 rounded shadow">
                    <h2 class="text-2xl font-bold mb-4">Training Content</h2>

                    <div class="flex gap-4 mb-4">
                        <button class="training-option bg-blue-200 px-4 py-2 rounded" data-video="password">
                            Strong Passwords
                        </button>
                        <button class="training-option bg-blue-200 px-4 py-2 rounded" data-video="mfa">
                            Multi-Factor Authentication
                        </button>
                    </div>

                    <div id="password-video" class="training-video hidden">
                        <h3 class="text-xl font-semibold mb-2">Strong Passwords</h3>
                        <p class="mb-4">
                            Use long, complex, and unique passwords. Avoid reusing the same password. Consider using a
                            password manager.
                        </p>
                        <video id="video-password" controls class="w-full rounded shadow">
                            <source src="/videos/ICT%20302%20-%20Module%201.mp4" type="video/mp4" />
                            Your browser does not support the video tag.
                        </video>
                    </div>

                    <div id="mfa-video" class="training-video hidden">
                        <h3 class="text-xl font-semibold mb-2">Multi-Factor Authentication</h3>
                        <p class="mb-4">
                            MFA adds an extra layer of security. Even if your password is stolen, the second factor
                            keeps you protected.
                        </p>
                        <video id="video-mfa" controls class="w-full rounded shadow">
                            <source src="your-mfa-video.mp4" type="video/mp4" />
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </section>

                <!-- Quiz Module -->
                <section id="quiz" class="hidden bg-white p-6 rounded shadow">
                    <h2 class="text-2xl font-bold mb-4">Quiz</h2>

                    <!-- Topic Selector -->
                    <div id="quiz-selection">
                        <label class="block font-semibold mb-2">Select a Quiz Topic:</label>
                        <select id="quiz-topic" class="w-full p-2 border rounded mb-4">
                            <option value="">-- Choose Topic --</option>
                            <option value="password">Strong Passwords</option>
                            <option value="mfa">Multi-Factor Authentication</option>
                        </select>
                        <button id="start-quiz-btn" class="bg-blue-600 text-white px-4 py-2 rounded">Next</button>
                    </div>

                    <!-- Actual Quiz Form (Initially Hidden) -->
                    <form id="quiz-form" class="hidden mt-6">
                        <div id="quiz-questions"></div>
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded mt-4">Submit Quiz</button>
                    </form>

                    <div id="quiz-result" class="mt-4 font-semibold"></div>
                </section>

                <!-- Feedback Module -->
                <section id="feedback" class="hidden bg-white p-6 rounded shadow">
                    <h2 class="text-2xl font-bold mb-4">Survey</h2>
                    <form id="feedback-form">
                        <label class="block mb-2">Select your module:</label>
                        <select name="rating" class="mb-4 p-2 border w-full rounded">
                            <option value="">-- Module --</option>
                            <option value="5">Strong Passwords</option>
                            <option value="4">Multi-Factor Authentication</option>
                        </select>
                        <label class="block mb-2">How would you rate this module?</label>
                        <select name="rating" class="mb-4 p-2 border w-full rounded">
                            <option value="">-- Rate --</option>
                            <option value="5">Excellent</option>
                            <option value="4">Good</option>
                            <option value="3">Average</option>
                            <option value="2">Poor</option>
                            <option value="1">Very Poor</option>
                        </select>
                        <label class="block mb-2">Any comments?</label>
                        <textarea name="comments" class="w-full p-2 border rounded mb-4"></textarea>
                        <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Submit Feedback</button>
                    </form>
                    <div id="feedback-msg" class="mt-4 font-semibold text-green-600"></div>
                </section>

                <!-- Report Module -->
                <section id="report" class="hidden bg-white p-6 rounded shadow">
                    <h2 class="text-2xl font-bold mb-4">Report</h2>
                    <div id="report-content" class="text-gray-800"></div>
                </section>
            </main>
        </div>

        <script>
            const firebaseConfig = {
                apiKey: "AIzaSyAdFptKhxHQj9FDbya9lMUw3e1okcp8Kmk",
                authDomain: "cybersecurity-training-a-35bbf.firebaseapp.com",
                projectId: "cybersecurity-training-a-35bbf",
                storageBucket: "cybersecurity-training-a-35bbf.firebasestorage.app",
                messagingSenderId: "1080075020112",
                appId: "1:1080075020112:web:1a2b5a44df03ba6b74ee55"
            };

            firebase.initializeApp(firebaseConfig);

            const auth = firebase.auth();

            document.getElementById("login-btn").addEventListener("click", () => {
                const email = document.getElementById("email").value;
                const password = document.getElementById("password").value;
                auth.signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        document.getElementById("user-name").innerText = user.displayName || "User";
                        document.getElementById("user-email").innerText = user.email;
                        document.getElementById("auth-section").classList.add("hidden");
                        document.getElementById("main-app").classList.remove("hidden");
                    })
                    .catch((error) => {
                        document.getElementById("auth-error").innerText = error.message;
                    });
            });

            let quizCompleted = false;
            let quizScore = 0;
            let passwordScore = null;
            let mfaScore = null;

            function stopAllVideos() {
                document.querySelectorAll("video").forEach((v) => {
                    v.pause();
                    v.currentTime = 0;
                });
            }

            document.querySelectorAll(".tab").forEach((btn) => {
                btn.addEventListener("click", () => {
                    const target = btn.dataset.target;

                    stopAllVideos();
                    document.querySelectorAll("section").forEach((sec) => sec.classList.add("hidden"));
                    document.getElementById(target).classList.remove("hidden");

                    if (target === "report") {
                        const report = document.getElementById("report-content");
                        let html = "";

                        if (passwordScore !== null) {
                            html += `<p><strong>Password Quiz Completed:</strong> Yes</p><p><strong>Score:</strong> ${passwordScore}%</p><hr class="my-2" />`;
                        } else {
                            html += `<p><strong>Password Quiz Completed:</strong> No</p><hr class="my-2" />`;
                        }

                        if (mfaScore !== null) {
                            html += `<p><strong>MFA Quiz Completed:</strong> Yes</p><p><strong>Score:</strong> ${mfaScore}%</p>`;
                        } else {
                            html += `<p><strong>MFA Quiz Completed:</strong> No</p>`;
                        }

                        report.innerHTML = html;
                    }
                });
            });

            document.querySelectorAll(".training-option").forEach((btn) => {
                btn.addEventListener("click", () => {
                    stopAllVideos();
                    document.querySelectorAll(".training-video").forEach((div) => div.classList.add("hidden"));
                    const selected = btn.dataset.video;
                    const videoEl = document.getElementById(`${selected}-video`);
                    videoEl.classList.remove("hidden");
                    const vid = videoEl.querySelector("video");
                    vid.currentTime = 0;
                    vid.play();
                    vid.onended = () => {
                        document.querySelectorAll("section").forEach((sec) => sec.classList.add("hidden"));
                        document.getElementById("quiz").classList.remove("hidden");
                    };
                });
            });

            const quizData = {
                password: [
                    {
                        question: "What is a strong password?",
                        options: ["12345678", "password123", "Long, complex, and unique", "Your name and birth year"],
                        answer: "Long, complex, and unique"
                    },
                    {
                        question: "Which is a good practice?",
                        options: [
                            "Reusing old passwords",
                            "Using your dog's name",
                            "Using a password manager",
                            "Writing passwords on paper"
                        ],
                        answer: "Using a password manager"
                    },
                    {
                        question: "Why should passwords be long?",
                        options: [
                            "To look fancy",
                            "To avoid typing errors",
                            "To resist brute-force attacks",
                            "No reason"
                        ],
                        answer: "To resist brute-force attacks"
                    },
                    {
                        question: "What’s the issue with using ‘password’ as your password?",
                        options: ["Nothing at all", "It's too strong", "It’s easily guessed", "It's too long"],
                        answer: "It’s easily guessed"
                    },
                    {
                        question: "How often should you change passwords?",
                        options: ["Never", "Only when hacked", "Regularly or when breached", "Every 2 days"],
                        answer: "Regularly or when breached"
                    }
                ],
                mfa: [
                    {
                        question: "What does MFA stand for?",
                        options: [
                            "Multiple File Access",
                            "Multi-Factor Authentication",
                            "Managed Firewall Access",
                            "Multi-Face Approval"
                        ],
                        answer: "Multi-Factor Authentication"
                    },
                    {
                        question: "Why use MFA?",
                        options: [
                            "It slows down hackers",
                            "To double your passwords",
                            "To use one-time passwords only",
                            "It's mandatory"
                        ],
                        answer: "It slows down hackers"
                    },
                    {
                        question: "What’s a common second factor?",
                        options: ["Password", "Date of birth", "OTP sent to your phone", "Your username"],
                        answer: "OTP sent to your phone"
                    },
                    {
                        question: "Is MFA effective even if password is compromised?",
                        options: [
                            "Yes, it adds another layer",
                            "No, it disables your account",
                            "It only delays login",
                            "It replaces passwords"
                        ],
                        answer: "Yes, it adds another layer"
                    },
                    {
                        question: "Which is NOT an MFA method?",
                        options: ["Fingerprint", "Security key", "Email verification", "Typing speed"],
                        answer: "Typing speed"
                    }
                ]
            };

            const quizTopicSelect = document.getElementById("quiz-topic");
            const startQuizBtn = document.getElementById("start-quiz-btn");
            const quizForm = document.getElementById("quiz-form");
            const quizQuestionsDiv = document.getElementById("quiz-questions");
            const quizResult = document.getElementById("quiz-result");

            function loadQuiz(topic) {
                quizQuestionsDiv.innerHTML = "";
                quizResult.innerText = "";
                quizForm.reset();

                quizData[topic].forEach((q, index) => {
                    const qBlock = document.createElement("div");
                    qBlock.className = "mb-4";

                    const label = document.createElement("label");
                    label.className = "block font-semibold mb-1";
                    label.innerText = `${index + 1}. ${q.question}`;

                    const select = document.createElement("select");
                    select.className = "w-full p-2 border rounded";
                    select.name = `q${index}`;

                    const defaultOption = document.createElement("option");
                    defaultOption.value = "";
                    defaultOption.innerText = "-- Select --";
                    select.appendChild(defaultOption);

                    q.options.forEach((option) => {
                        const opt = document.createElement("option");
                        opt.value = option;
                        opt.innerText = option;
                        select.appendChild(opt);
                    });

                    qBlock.appendChild(label);
                    qBlock.appendChild(select);
                    quizQuestionsDiv.appendChild(qBlock);
                });
                quizForm.classList.remove("hidden");
            }

            startQuizBtn.addEventListener("click", () => {
                const selectedTopic = quizTopicSelect.value;
                if (!selectedTopic) {
                    alert("Please select a quiz topic.");
                    return;
                }
                loadQuiz(selectedTopic);
                startQuizBtn.style.display = "none";
            });

            quizTopicSelect.addEventListener("change", () => {
                quizForm.classList.add("hidden");
                quizQuestionsDiv.innerHTML = "";
                quizResult.innerText = "";
                startQuizBtn.style.display = "inline-block";
            });

            quizForm.addEventListener("submit", (e) => {
                e.preventDefault();
                const selectedTopic = quizTopicSelect.value;
                const questions = quizData[selectedTopic];
                let score = 0;

                for (let i = 0; i < questions.length; i++) {
                    const selected = quizForm[`q${i}`].value;
                    if (selected === questions[i].answer) score++;
                }

                const percentage = (score / questions.length) * 100;
                quizCompleted = true;

                if (selectedTopic === "password") {
                    passwordScore = percentage;
                } else if (selectedTopic === "mfa") {
                    mfaScore = percentage;
                }

                quizResult.innerText =
                    percentage >= 70
                        ? `✅ Great job! You scored ${percentage}%.`
                        : `❌ You scored ${percentage}%. Please review the training and try again.`;
            });
        </script>

    </body>
</html>